# ITMO AI vs AI Product — Admissions Helper Bot

Чат-бот, который в диалоге помогает абитуриенту выбрать между двумя магистерскими программами ИТМО и спланировать обучение:
- **Искусственный интеллект** — https://abit.itmo.ru/program/master/ai
- **Управление ИИ‑продуктами (AI Product)** — https://abit.itmo.ru/program/master/ai_product

## Что внутри
- `scraper.py` — парсинг страниц программ, попытка скачать **учебные планы** (кнопка «Скачать учебный план» часто грузится через JS). Если PDF скачан — парсинг таблиц в JSON.
- `bot.py` — Telegram‑бот на `aiogram`. Отвечает **только** по релевантному контенту (RAG по нашим данным), сравнивает программы, отвечает на вопросы, даёт рекомендации по элективам.
- `retriever.py` — простейший BM25‑подобный поиск по локальному корпусу контента программ.
- `recommender.py` — правило‑ориентированные рекомендации выборных дисциплин на основе бэкграунда пользователя.
- `data/programs_seed.json` — базовые факты (форма, стоимость, длительность, фокус, карьерные роли), инициализирующие знания бота.
- `plans/` — сюда сохраняются скачанные **учебные планы** (PDF) и их JSON‑версии.
- `docs/decision_notes.md` — заметки о принятии решений и компромиссах.

## Быстрый старт
1. Python 3.11+
2. `pip install -r requirements.txt`
3. Скопируйте `.env.example` → `.env` и задайте `BOT_TOKEN=...` (Telegram BotFather).
4. Запустите парсер: `python scraper.py`
5. Запустите бота: `python bot.py`

## Как бот ограничивает ответы только темой поступления
- Жёсткий вайтлист доменов/источников (`abit.itmo.ru`, `ai.itmo.ru`, `aiproduct.itmo.ru`).
- Ответы строятся **исключительно** из локального корпуса (seed + распарсенные планы).
- Запросы вне темы поступления/учебного плана — вежливый отказ.

## Примечание по учебным планам
Кнопка «Скачать учебный план» на `abit.itmo.ru` часто рендерится скриптом. В `scraper.py` есть 2 механизма:
- быстрый — пробует найти прямые ссылки на PDF,
- устойчивый — headless‑браузер (Playwright) кликает кнопку и ловит загрузку.
Далее PDF парсится (`pdfplumber`), таблицы вытаскиваются эвристически. Если структура другая, сохраняется полный текст и CSV‑экспорт таблиц.

## Лицензия
MIT
